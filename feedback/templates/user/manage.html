{% extends "layout.html" %}
{% import "user/macro_field_with_errors.html" as macros %}
{% set active_page = 'Manage Users' %}

{% block content %}
  <div id="container">
    <section id='user-list' class='row twelve columns'>

      <h3>Manage your users.</h3>

      {% for user in users %}
      <li class='user twelve columns' id='0'>
        <span class='user-name'>{{ user.print_pretty_name() }}</span>
        <span class='user-mail'>{{ user.email }}</span>
        <span class='user-permissions'>
          <span class='bold'>Permissions: </span>
          {{ user.role.name }}
        </span>
        {% if current_user.is_admin() %}
          <button class="button password three columns" type="submit">Edit user</button>
        {% endif %}
        {% if current_user.is_admin() %}
        <form action="{{ url_for('user.user_delete', id=user.email) }}" method="POST">
          <button class="button delete three columns" type="submit">Delete user</button>
        </form>
        {% endif %}
      </li>
      {% endfor %}

      {% if current_user.is_admin() %}
      <li class='add-user button'>Add a new user</li>
      {% endif %}

    </section>

  </div><!--!/#container -->

{% endblock %}

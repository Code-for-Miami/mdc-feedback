{% extends "layout.html" %}
{% import "user/macro_field_with_errors.html" as macros %}
{% set active_page = 'Manage Users' %}

{% block content %}
  <div id="container">
    <section id='user-list' class='row twelve columns'>

      <h3>Manage your users.</h3>

      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Permissions</th>
            {% if current_user.is_admin() %}
            <th>Actions</th>
            {% endif %}
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
          <tr>
            <td>{{ user.full_name }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.role.name }}</td>
            {% if current_user.is_admin() %}
            <td>
              <a class="" href="{{ url_for('user.user_edit', id=user.id) }}">Edit user</a>
              <form action="{{ url_for('user.user_delete', id=user.email) }}" method="POST">
                <button class="" type="submit">Delete user</button>
              </form>
            </td>
            {% endif %}
          </tr>
          {% endfor %}
        </tobdy>
      </table>

      {% if current_user.is_admin() %}
      <li class='add-user button'>Add a new user</li>
      {% endif %}

    </section>

  </div><!--!/#container -->

{% endblock %}

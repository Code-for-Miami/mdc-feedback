{% extends "layout.html" %}
{% import "user/macro_field_with_errors.html" as macros %}
{% set active_page = 'Survey Builder' %}

{% block content %}
  <div id="container">

    <section id='user-list' class='row twelve columns'>

      <h1>Manage your users.</h1>

      {% for user in users %}
      <li class='user twelve columns' id='0'>
        <span class='user-name'>{{ user.print_pretty_name() }}</span>
        <span class='user-permissions'><span class='bold'>Permissions: </span>Superuser</span>
        <p class='button password three columns'>Edit user</p>

        <form action="{{ url_for('user.user_delete', id=user.email) }}" method="POST">
          <button class="button delete three columns" type="submit">Delete user</button>
        </form>
      </li>
      {% endfor %}

      <li class='add-user button'>Add a new user</li>

    </section>

    <section id='add-user-form' class='row twelve columns hidden'>

      <h3>Add a new user.</h3>

      <form action="{{ url_for('user.user_create') }}" method="POST">
        {{ form.csrf_token }}
        <div class='row'>
          <h4>What's your user's name?</h4>
          {{ macros.with_errors(form.first_name, class_="six columns", placeholder="First Name") }}
          {{ macros.with_errors(form.last_name, class_="six columns", placeholder="Last Name") }}
        </div>

        <div class='row'>
          <h4>What's your user's e-mail address?</h4>
          {{ macros.with_errors(form.email, class_="six columns", placeholder="name@miamidade.gov") }}
        </div>

        <div class='row'>
          <h4>What permissions should your user have?</h4>
          {% for subfield in form.role_id %}
          <p>{{ subfield(class=radio) }}<label>{{ subfield.label}}</label></p>
          {% endfor %}
        </div>

        <button class='button' type="submit" id='submit-new-user'>Create new user</button>
      </form>

    </section>

  </div><!--!/#container -->

{% endblock %}
